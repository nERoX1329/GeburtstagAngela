<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ablaufplan: Angelas Geburtstag in L√ºbeck</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;1,400&display=swap');

        :root {
            --primary-color: #2c3e50; /* Dunkles Marineblau/Anthrazit */
            --secondary-color: #b08d57; /* Warmes Gold/Bronze */
            --accent-color: #e0b4b4; /* Sanftes Ros√© f√ºr Timer-Akzente */
            --background-color: #fdfaf6; /* Sehr helles Creme */
            --text-color-dark: #333333;
            --text-color-light: #5c5c5c;
            --card-background: #FFFFFF;
            --border-color: #e0e0e0;
            --shadow-color: rgba(44, 62, 80, 0.1); /* Schatten basierend auf Prim√§rfarbe */

            --timer-green: #6ab04c; /* Frisches Gr√ºn */
            --timer-orange: #f0932b; /* Warmes Orange */
            --timer-red: #eb4d4b; /* Klares Rot */
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        body {
            font-family: 'Lato', sans-serif; /* Klare Sans-Serif f√ºr Basis */
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color-dark);
            line-height: 1.75;
            overflow-x: hidden;
        }

        .main-header {
            background-color: var(--primary-color);
            color: white;
            padding: 4em 1.5em 3.5em;
            text-align: center;
            border-bottom: 10px solid var(--secondary-color);
        }

        .main-header h1 {
            margin: 0 0 0.2em 0;
            font-family: 'Playfair Display', serif;
            font-size: 3.2em;
            font-weight: 700;
            letter-spacing: 1px;
        }
        .main-header h1 .highlight {
            color: var(--secondary-color);
            font-style: italic;
            display: inline; /* L√§sst es besser im Textfluss wirken */
        }

        .main-header p {
            margin-top: 0.5em;
            font-size: 1.4em;
            font-weight: 300;
            opacity: 0.9;
            color: #f0f0f0; /* Hellerer Text f√ºr Kontrast auf dunklem Blau */
        }

        .timeline-container {
            max-width: 850px; /* Etwas schmaler f√ºr eleganteren Look */
            margin: 50px auto;
            padding: 0 20px;
            position: relative;
        }
        
        /* Optionale zentrale Timeline-Linie */
        .timeline-container::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 20px;
            bottom: 20px;
            width: 3px;
            background-color: var(--border-color); /* Dezente Linie */
            z-index: -1; /* Hinter den Elementen */
            border-radius: 3px;
        }


        .timeline-event { 
            background-color: var(--card-background);
            border-radius: 10px; 
            border: 1px solid #eaeaea; /* Sehr heller Rand */
            box-shadow: 0 10px 30px var(--shadow-color);
            margin-bottom: 50px; /* Mehr Abstand zwischen Events */
            opacity: 0; 
            transform: translateY(40px); 
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
            overflow: hidden;
            display: flex; /* F√ºr Bild links, Text rechts Layout */
            flex-direction: row; /* Standard, kann per nth-child ge√§ndert werden */
        }
        
        /* Abwechselndes Layout */
        .timeline-event:nth-child(odd) {
             flex-direction: row-reverse; /* Bild rechts, Text links */
        }


        .timeline-event.is-visible { 
            opacity: 1;
            transform: translateY(0);
        }

        .event-image-container {
            width: 45%; /* Bild nimmt weniger Platz ein */
            min-height: 300px; /* Mindesth√∂he f√ºr Bilder */
            overflow: hidden;
        }
        .event-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover; 
            display: block;
            transition: transform 0.4s ease;
        }
        .timeline-event:hover .event-image-container img {
            transform: scale(1.05); /* Leichter Zoom-Effekt auf Bild bei Hover */
        }
        
        .event-content {
            padding: 35px; /* Mehr Padding im Inhaltsbereich */
            width: 55%; /* Text nimmt mehr Platz ein */
            display: flex;
            flex-direction: column;
        }
        
        .event-time {
            font-family: 'Lato', sans-serif;
            font-size: 1.1em; /* Zeit etwas dezenter */
            color: var(--accent-color); 
            font-weight: 700; /* Fett f√ºr gute Lesbarkeit */
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .event-title {
            font-family: 'Playfair Display', serif;
            color: var(--primary-color); 
            font-size: 2.2em; /* Titelgr√∂√üe angepasst */
            margin-top: 0;
            margin-bottom: 18px;
        }

        .event-description {
            font-family: 'Lora', serif;
            font-size: 1.1em; /* Beschreibung etwas gr√∂√üer */
            line-height: 1.8;
            color: var(--text-color-light); 
            margin-bottom: auto; /* Schiebt den Timer nach unten, falls vorhanden */
            flex-grow: 1;
        }
        
        .timeline-transition {
            text-align: center;
            padding: 20px 0 30px 0; 
            font-family: 'Lato', sans-serif;
            color: var(--primary-color); 
            margin-bottom: 50px; 
            opacity: 0; 
            transform: translateY(30px); 
            transition: opacity 0.6s ease-out 0.2s, transform 0.6s ease-out 0.2s, display 0s linear 0.6s; 
            position: relative; 
        }
        .timeline-transition.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .timeline-transition.hidden { 
            display: none !important;
        }

        .departure-info { 
            font-weight: 500; /* Etwas leichter */
            font-size: 1em;
            padding: 8px 12px;
            border-radius: 6px; /* Weniger Abrundung */
            text-align: center;
            margin: 0 auto 12px auto; 
            color: white;
            transition: background-color 0.5s ease;
            display: inline-block; 
            min-width: 180px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .departure-info.timer-green { background-color: var(--timer-green); }
        .departure-info.timer-orange { background-color: var(--timer-orange); }
        .departure-info.timer-red { background-color: var(--timer-red); }
        .departure-info span { 
            font-weight: 700;
            font-size: 1.1em;
        }

        .transition-content { 
            font-style: normal; /* Nicht mehr kursiv */
            font-size: 1em;
            font-weight: 500;
            color: var(--text-color-light);
            margin-bottom: 12px; 
        }

        .timeline-transition .icon {
            font-size: 1.3em; 
            margin: 0 6px;
            color: var(--secondary-color); 
            vertical-align: middle;
        }

        .walk-path-container {
            width: 60%; 
            max-width: 250px;
            margin: 0 auto; 
            position: relative;
        }

        .walk-path-bar { /* F√ºllende Leiste */
            width: 100%;
            height: 8px; 
            background-color: #e0e0e0; /* Heller Hintergrund f√ºr die Leiste */
            border-radius: 4px;
            position: relative; 
            overflow: hidden;
        }
        .walk-path-bar-progress { /* Der sich f√ºllende Teil */
            height: 100%;
            width: 0%; /* Startet bei 0, wird von JS gesetzt */
            background: linear-gradient(90deg, var(--timer-green) 0%, var(--timer-orange) 70%, var(--timer-red) 100%);
            border-radius: 4px;
            transition: width 0.5s linear; /* Sanfte F√ºllanimation */
        }
        /* Kein separater .walk-dot mehr, der Fortschritt wird durch die F√ºllung der Leiste angezeigt */
        
        .final-wish {
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 2em; /* Gr√∂√üerer Wunsch */
            color: var(--primary-color); 
            margin-top: 60px;
            padding: 35px;
            background-color: var(--card-background);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            box-shadow: 0 10px 25px var(--shadow-color);
        }
        .final-wish .highlight {
            color: var(--secondary-color); 
            font-style: italic;
        }

        @media (max-width: 768px) {
            .main-header h1 { font-size: 2.2em; }
            .main-header p { font-size: 1.1em; }
             .timeline-container::before { display: none; } /* Vertikale Linie auf Mobil ausblenden */
            .timeline-event, .timeline-event:nth-child(odd) {
                flex-direction: column; /* Events untereinander auf Mobil */
            }
            .event-image-container, .event-content {
                width: 100%;
            }
            .event-image-container { height: 220px; }
            .event-content { padding: 25px; }
            .event-title { font-size: 1.8em; }
            .event-time { font-size: 1em; }
            .event-description { font-size: 1em; }
            .departure-info { font-size: 0.9em; padding: 6px 10px;}
            .departure-info span { font-size: 1em; }
            .transition-content { font-size: 0.9em; }
            .walk-path-container { width: 70%; }
            .final-wish { font-size: 1.6em; padding: 25px;}
        }
    </style>
</head>
<body>
    <header class="main-header">
        <h1>Ablaufplan f√ºr <span class="highlight">Angelas Geburtstag</span></h1>
        <p>Ein wundervoller Tag in der sch√∂nen Hansestadt L√ºbeck!</p>
    </header>

    <div class="timeline-container">
        <div class="timeline-event">
            <div class="event-image-container">
                <img src="https://lh3.googleusercontent.com/gps-cs-s/AC9h4npAuR8CEeYkU8kjlDpsqe6ECmDzJ-3p-gP4HjzosjNRPfG0dEL_AIDKqgh5mcZVBDGonHxghMDdJBbKn9i5gtFgNJ5mi_10YaD347B8MVzw2HN3fmSD3vv0AHJsVX8yGU5qMWcC8Q=s680-w680-h510-rw" alt="Restaurant Schiffergesellschaft" onerror="this.alt='Bild der Schiffergesellschaft'; this.src='https://via.placeholder.com/800x400.png?text=Schiffergesellschaft'; console.warn('Schiffergesellschaft Bild konnte nicht geladen werden.');">
            </div>
            <div class="event-content">
                <p class="event-time">12:00 Uhr</p>
                <h2 class="event-title">Mittagessen: Schiffergesellschaft</h2>
                <p class="event-description">
                    Ein historisches Juwel L√ºbecks: Die Schiffergesellschaft ist eines der √§ltesten Gildeh√§user der Stadt und beeindruckt mit ihren prunkvollen S√§len, Schiffsmodellen und der traditionellen norddeutschen K√ºche. Ein Ort, an dem Geschichte lebendig wird und man hanseatische Gastfreundschaft genie√üt.
                </p>
            </div>
        </div>

        <div class="timeline-transition" id="transition-to-hansemuseum">
            <div class="departure-info" id="departure-info-to-hansemuseum">Wird berechnet...</div>
            <div class="transition-content">
                <span class="icon">üö∂‚Äç‚ôÄÔ∏è</span>
                Ca. 7-10 Min. Fu√üweg
                <span class="icon">üö∂‚Äç‚ôÇÔ∏è</span>
            </div>
            <div class="walk-path-container">
                <div class="walk-path-bar" id="walk-path-bar-to-hansemuseum">
                    <div class="walk-path-bar-progress" id="walk-progress-to-hansemuseum"></div>
                </div>
            </div>
        </div>

        <div class="timeline-event">
             <div class="event-image-container">
                <img src="https://www.baunetzwissen.de/imgs/1/9/2/0/3/1/3/WH1607-4335-7ec25a8286af2327.jpg" alt="Europ√§isches Hansemuseum" onerror="this.alt='Bild des Hansemuseums'; this.src='https://via.placeholder.com/800x400.png?text=Hansemuseum';">
            </div>
            <div class="event-content">
                <p class="event-time">13:45 Uhr</p>
                <h2 class="event-title">Besuch: Europ√§isches Hansemuseum</h2>
                <p class="event-description">
                    Das gr√∂√üte Museum zur Geschichte der Hanse weltweit. Hier erlebt ihr eine interaktive Reise durch 800 Jahre Hansegeschichte, von den Anf√§ngen bis zum Niedergang. Moderne Architektur trifft auf historische Exponate und macht den Besuch zu einem eindrucksvollen Erlebnis.
                </p>
            </div>
        </div>

        <div class="timeline-transition" id="transition-to-niederegger">
            <div class="departure-info" id="departure-info-to-niederegger">Wird berechnet...</div>
            <div class="transition-content">
                <span class="icon">üö∂‚Äç‚ôÄÔ∏è</span>
                Ca. 10-12 Min. Fu√üweg
                <span class="icon">üö∂‚Äç‚ôÇÔ∏è</span>
            </div>
            <div class="walk-path-container">
                <div class="walk-path-bar" id="walk-path-bar-to-niederegger">
                     <div class="walk-path-bar-progress" id="walk-progress-to-niederegger"></div>
                </div>
            </div>
        </div>

        <div class="timeline-event">
            <div class="event-image-container">
                <img src="https://www.niederegger.de/fileadmin/media/_processed_/3/f/csm_ce-101_cafe-niederegger_27a82709c5.jpg" alt="Caf√© Niederegger" onerror="this.alt='Bild vom Caf√© Niederegger'; this.src='https://via.placeholder.com/800x400.png?text=Niederegger+Caf√©';">
            </div>
            <div class="event-content">
                <p class="event-time">16:00 Uhr</p>
                <h2 class="event-title">Kaffeepause: Caf√© Niederegger</h2>
                <p class="event-description">
                    Das Herzst√ºck der L√ºbecker Marzipantradition seit 1806. Im Stammhaus gegen√ºber dem Rathaus erwartet euch nicht nur das ber√ºhmte Caf√© mit seiner legend√§ren Nusstorte und unz√§hligen Marzipanspezialit√§ten, sondern auch der Marzipan-Salon, der die Geschichte dieser s√º√üen Verf√ºhrung erz√§hlt.
                </p>
            </div>
        </div>
        
        <div class="final-wish">
            Alles Liebe und Gute zum Geburtstag, <span class="highlight">Angela</span>! <br>Wir w√ºnschen dir einen wundervollen Tag!
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const timelineElements = document.querySelectorAll('.timeline-event, .timeline-transition');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            timelineElements.forEach(element => {
                observer.observe(element);
            });

            const targetEventDate = {
                year: 2025,
                month: 4, // Mai
                day: 30
            };

            const eventSchedule = [
                {
                    transitionElementId: "transition-to-hansemuseum",
                    departureInfoElementId: "departure-info-to-hansemuseum",
                    walkProgressBarElementId: "walk-progress-to-hansemuseum", // Ge√§ndert von walkDot
                    nextEventStartTimeString: "13:45", 
                    travelTimeToNextEventInMinutes: 10, 
                    departureWindowInMinutes: 15,
                    gracePeriodAfterDepartureMinutes: 15 
                },
                {
                    transitionElementId: "transition-to-niederegger",
                    departureInfoElementId: "departure-info-to-niederegger",
                    walkProgressBarElementId: "walk-progress-to-niederegger", // Ge√§ndert von walkDot
                    nextEventStartTimeString: "16:00", 
                    travelTimeToNextEventInMinutes: 12, 
                    departureWindowInMinutes: 15,
                    gracePeriodAfterDepartureMinutes: 15
                }
            ];

            function parseTimeStringWithTargetDate(timeString) {
                const eventDate = new Date(targetEventDate.year, targetEventDate.month, targetEventDate.day);
                const [hours, minutes] = timeString.split(':');
                eventDate.setHours(parseInt(hours, 10), parseInt(minutes, 10), 0, 0);
                return eventDate;
            }

            function updateTimersAndWalkPaths() { // Umbenannt
                const now = new Date(); 

                eventSchedule.forEach(eventConfig => {
                    const transitionBlock = document.getElementById(eventConfig.transitionElementId);
                    const departureInfoDiv = document.getElementById(eventConfig.departureInfoElementId);
                    const walkProgressBar = document.getElementById(eventConfig.walkProgressBarElementId); // Ge√§ndert

                    if (!transitionBlock || !departureInfoDiv || !walkProgressBar) { // Ge√§ndert
                        // console.warn("Ein Element f√ºr Timer/WalkPath nicht gefunden:", eventConfig);
                        return;
                    }

                    const nextEventStartTime = parseTimeStringWithTargetDate(eventConfig.nextEventStartTimeString);
                    const idealDepartureTime = new Date(nextEventStartTime.getTime() - eventConfig.travelTimeToNextEventInMinutes * 60000);
                    
                    const timeLeftToIdealDepartureMs = idealDepartureTime.getTime() - now.getTime();
                    
                    const timeAfterIdealDepartureMs = now.getTime() - idealDepartureTime.getTime();
                    if (timeAfterIdealDepartureMs > eventConfig.gracePeriodAfterDepartureMinutes * 60000) {
                        transitionBlock.classList.add('hidden'); 
                        return; 
                    } else {
                        transitionBlock.classList.remove('hidden');
                    }

                    if (now > nextEventStartTime) { 
                        departureInfoDiv.innerHTML = "N√§chstes Event hat begonnen.";
                        departureInfoDiv.className = 'departure-info timer-red';
                    } else {
                        let message = "";
                        let timerClass = "";
                        if (timeLeftToIdealDepartureMs <= 0) {
                            message = "JETZT LOSGEHEN!";
                            timerClass = "timer-red";
                        } else {
                            const daysLeft = Math.floor(timeLeftToIdealDepartureMs / (1000 * 60 * 60 * 24));
                            const hoursLeft = Math.floor((timeLeftToIdealDepartureMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                            const minutesLeft = Math.floor((timeLeftToIdealDepartureMs % (1000 * 60 * 60)) / (1000 * 60));
                            const secondsLeft = Math.floor((timeLeftToIdealDepartureMs % (1000 * 60)) / 1000);
                            
                            if (daysLeft > 0) {
                                message = `Aufbruch in: <span>${daysLeft} T ${String(hoursLeft).padStart(2, '0')} Std.</span>`;
                            } else if (hoursLeft > 0) {
                                message = `Aufbruch in: <span>${String(hoursLeft).padStart(2, '0')}:${String(minutesLeft).padStart(2, '0')} Std.</span>`;
                            } else {
                                message = `Aufbruch in: <span>${String(minutesLeft).padStart(2, '0')}:${String(secondsLeft).padStart(2, '0')}</span> Min.`;
                            }
                            
                            if (timeLeftToIdealDepartureMs <= eventConfig.departureWindowInMinutes * 60000) {
                                timerClass = "timer-orange";
                            } else {
                                timerClass = "timer-green";
                            }
                        }
                        departureInfoDiv.innerHTML = message;
                        departureInfoDiv.className = `departure-info ${timerClass}`;
                    }

                    // Walk-Path-Bar F√ºll-Logik
                    const maxTimeRepresentedByBarMs = eventConfig.departureWindowInMinutes * 60000;
                    const timeToShowOnBarMs = Math.max(0, Math.min(timeLeftToIdealDepartureMs, maxTimeRepresentedByBarMs)); 
                    let progressPercent = ((maxTimeRepresentedByBarMs - timeToShowOnBarMs) / maxTimeRepresentedByBarMs) * 100;
                    
                    progressPercent = Math.max(0, Math.min(progressPercent, 100));
                    if (now >= idealDepartureTime) { 
                        progressPercent = 100;
                    }
                    walkProgressBar.style.width = progressPercent + '%';
                });
            }

            updateTimersAndWalkPaths(); // Umbenannt
            setInterval(updateTimersAndWalkPaths, 1000); // Umbenannt
        });
    </script>
</body>
</html>
